id: http://w3id.org/ontogpt/dietician_notes
name: dietitian_notes
title: Dietitian Notes Extraction Template
description: >-
  A template for extracting clinical observations from dietitian notes.
  Developed with guidance from Lauren Chan, PhD, RD
  and Alyson Lawrence, RD, CNSC
license: https://creativecommons.org/publicdomain/zero/1.0/
prefixes:
  linkml: https://w3id.org/linkml/
  dietician_notes: http://w3id.org/ontogpt/dietitian_notes
  HP: http://purl.obolibrary.org/obo/HP_

default_prefix: dietitian_notes
default_range: string

# TODO: address extracted chunks that are too large
# TODO: find additional grounding strategies
# TODO: provide additional examples for each class
# TODO: set up user agent with acronyms
#     (or try gilda)

imports:
  - linkml:types
  - core

classes:
  ClinicalObservationSet:
    description: >-
      A set of sets of clinical observations.
    attributes:
      observations:
        range: ClinicalObservations
        multivalued: true

  # TODO: want to capture risk for refeeding syndrome
  # can ground to MONDO:0400005
  ClinicalObservations:
    tree_root: true
    description: >-
      A set of clinical observations about a single patient at a single time.
    is_a: NamedEntity
    attributes:
      is_pediatric:
        annotations:
          prompt: >-
            True if the patient is a child, False otherwise.
        range: string
      is_preterm:
        annotations:
          prompt: >-
            True if the patient's birth was preterm, False otherwise.
            A birth before 37 weeks gestation is preterm.
        range: string
      patient_height:
        annotations:
          prompt: >-
            The value and units of the patient's height.
            'Not provided' if not provided.
        range: QuantitativeValueWithMetric
      patient_weight:
        annotations:
          prompt: >-
            The value and units of the patient's weight.
            'Not provided' if not provided.
        range: QuantitativeValueWithMetric
      head_circumference:
        annotations:
          prompt: >-
            The value and units of the patient's head circumference.
            This may be abbreviated as "HC".
            'Not provided' if not provided.
        range: QuantitativeValueWithMetric
      malnutrition_status:
        annotations:
          prompt: >-
            Observations of the patient's malnutrition status.
            'Not provided' if not provided.
        range: MalnutritionObservations
      diet_supplementation:
        description: >-
          A semicolon-separated list of the patient's diet supplementation
          therapies. All acronyms should be expanded,
          omitting the original acronym. Relevant acronyms: PO: per os/by mouth,
          NPO: nil per os/nothing by mouth, TPN: total parenteral nutrition,
          PN: parenteral nutrition, EN: enteral nutrition, IBW: ideal body
          weight, UBW: usual body weight, ABW: actual body weight,
          D#%: dextrose percentage (e.g. D5%) for PN infusion,
          AA # g/kg/d: amino acid provisions (may also be in percentages)
          for PN infusion, SMOF # g/kg/d: soy MCT olive fish oil emulsion for
          PN infusion, GIR: glucose infusion rate, SBS: short bowel syndrome,
          LIS: low intermittent suction, BW: birth weight, EHM: exclusively
          human milk, RTBW: return to birth weight, Mg: magnesium,
          Phos: phosphorus, GI: gastrointestinal, PICC: peripherally inserted
          central catheter, DOL: day of life, TG: triglycerides, KUB: Kidney
          ureter bladder CT
        range: DietSupplementation
        multivalued: true
      nutrition_support:
        description: >-
          A semicolon-separated list of the patient's nutrition support
          therapies, usually enteral or parenteral nutrition.
          All acronyms should be expanded, omitting the original acronym.
          Relevant acronyms: PO: per os/by mouth, NPO: nil per os/nothing by
          mouth, TPN: total parenteral nutrition, PN: parenteral nutrition,
          EN: enteral nutrition, IBW: ideal body weight, UBW: usual body weight,
          ABW: actual body weight, D#%: dextrose percentage (e.g. D5%) for PN
          infusion, AA # g/kg/d: amino acid provisions (may also be in
          percentages) for PN infusion, SMOF # g/kg/d: soy MCT olive fish oil
          emulsion for PN infusion, GIR: glucose infusion rate, SBS: short
          bowel syndrome, LIS: low intermittent suction, BW: birth weight,
          EHM: exclusively human milk, RTBW: return to birth weight,
          Mg: magnesium, Phos: phosphorus, GI: gastrointestinal,
          PICC: peripherally inserted central catheter, DOL: day of life,
          TG: triglycerides, KUB: Kidney ureter bladder CT
        range: NutritionSupport
        multivalued: true

  QuantitativeValue:
    is_a: CompoundExpression
    annotations:
      owl: IntersectionOf
    attributes:
      value:
        description: >-
          The value of the quantity,
          or N/A if not provided.
        # would prefer a float, but that's invalid if a value isn't provided
        range: string
        annotations:
          owl: DataProperty, DataHasValue
      unit:
        description: The unit of the quantity.
        range: Unit
        slot_uri: qudt:unit
        annotations:
          owl: ObjectProperty, ObjectSomeValuesFrom

  QuantitativeValueWithMetric:
    is_a: QuantitativeValue
    annotations:
      owl: IntersectionOf
    attributes:
      percentile:
        description: >-
          The reported percentile of the value, as compared to a reference
          patient population. Always positive, on a scale from 0 to 99%.
          N/A if not provided.
        # would prefer a float, but that's invalid if a value isn't provided
        range: string
      zscore:
        description: >-
          The relative standard deviation of the value, as a function of the
          percentile. May be positive or negative. N/A if not provided.
        # would prefer a float, but that's invalid if a value isn't provided
        range: string

  # TODO: make distinction between presence vs risk for malnutrition
  # TODO: note that there are specific criteria for malnutrition diagnosis
  MalnutritionObservations:
    attributes:
      malnutrition_presence:
        description: >-
          True if the patient is malnourished, False otherwise.
          N/A if not provided.
        range: string
      malnutrition_risk:
        description: >-
          True if the patient has a demonstrable risk for malnutrition,
          False otherwise. N/A if not provided.
        range: string
      severity:
        description: >-
          The severity of the patient's malnutrition, if present.
          This may be Mild, Moderate, or Severe.
          In general, a patient receiving less than 50% of their
          estimated energy requirement for greater than 5 days
          is considered to have severe malnutrition.
          N/A if not provided.
        range: string
      diagnosis:
        # For MONDO this may often be MONDO:0001371,
        # for protein-energy malnutrition
        description: >-
          The patient's malnutrition diagnosis, if present.
          This should not include modifiers like 'severe'.
          N/A if not provided.
        range: Disease

  # TODO: distinguish whether this is currently active therapy
  #       or a reccomendation for future therapy (but not yet started)
  # TODO: consider adding dosages + frequency
  DietSupplementation:
    description: >-
      A diet supplementation therapy.
    is_a: NamedEntity
    id_prefixes:
      - FOODON
      - MAXO
      - EFO
    annotations:
      annotators: sqlite:obo:foodon, sqlite:obo:chebi, sqlite:obo:maxo, sqlite:obo:efo, sqlite:obo:mesh
      prompt.examples: >-
        single vitamin supplement, ginkgo biloba supplement,
        multi-mineral supplement, biotin supplementation,
        glucosamine supplement

  # TODO: consider limiting to children of MAXO:0000009
  #       or a more specific group of terms
  # TODO: consider adding dosages + frequency
  # TODO: may need more examples
  # TODO: consider grounding vs CHEBI? Maybe to MESH, but be careful
  #  of synonyms - they may only be technically correct
  # TODO: consider LOINC grounding for nutrition
  # TODO: consider adding a slot for the route of administration
  # TODO: consider adding a slot for the duration of therapy
  # TODO: consider adding a slot for general notes like "nil per os"
  NutritionSupport:
    description: >-
      A nutrition support therapy used to treat or prevent malnutrition.
    is_a: NamedEntity
    id_prefixes:
      - MAXO
      - EFO
    annotations:
      annotators: sqlite:obo:maxo, sqlite:obo:efo, sqlite:obo:mesh
      prompt.examples: >-
        enteral nutrition intake, gavage nutrition intake,
        parenteral nutrition intake, partial parenteral nutrition intake

  Disease:
    is_a: NamedEntity
    id_prefixes:
      - MONDO
      - EFO
    annotations:
      annotators: sqlite:obo:mondo, sqlite:obo:mesh, sqlite:obo:efo
      prompt.examples: cardiac asystole, COVID-19, Headache, cancer

  Unit:
    is_a: NamedEntity
    id_prefixes:
      - UO
      - NCIT
      - dbpediaont
    annotations:
      annotators: sqlite:obo:uo, sqlite:obo:dbpediaont, sqlite:obo:foodon
